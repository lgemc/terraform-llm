{"instance_id": "terraform-aws-3tier-001", "problem_statement": "Create a VPC with three subnets: one public subnet and two private subnets. Deploy an EC2 instance in the public subnet as a web server, an EC2 instance in the first private subnet as an application server, and an RDS instance in the second private subnet as the database. Include a security group and DB subnet group.", "difficulty": "hard", "tags": ["vpc", "ec2", "rds", "three-tier", "networking", "aws"], "provider": "aws", "region": "us-east-1", "expected_resources": {"aws_vpc": 1, "aws_subnet": 3, "aws_security_group": 1, "aws_instance": 2, "aws_db_instance": 1, "aws_db_subnet_group": 1}, "required_outputs": ["vpc_id", "web_instance_id", "app_instance_id", "db_endpoint"], "validation_script": "dataset/three_tier_vpc/validation.py", "gold_solution": {"main.tf": "resource \"aws_vpc\" \"my_vpc\" {\n  cidr_block = \"10.0.0.0/16\"\n}\n\nresource \"aws_subnet\" \"public_subnet\" {\n  vpc_id                  = aws_vpc.my_vpc.id\n  cidr_block              = \"10.0.1.0/24\"\n  availability_zone       = \"us-east-1a\"\n  map_public_ip_on_launch = true\n}\n\nresource \"aws_subnet\" \"private_subnet_1\" {\n  vpc_id            = aws_vpc.my_vpc.id\n  cidr_block        = \"10.0.2.0/24\"\n  availability_zone = \"us-east-1b\"\n}\n\nresource \"aws_subnet\" \"private_subnet_2\" {\n  vpc_id            = aws_vpc.my_vpc.id\n  cidr_block        = \"10.0.3.0/24\"\n  availability_zone = \"us-east-1c\"\n}\n\nresource \"aws_security_group\" \"web_sg\" {\n  vpc_id = aws_vpc.my_vpc.id\n  name   = \"web_sg\"\n}\n\nresource \"aws_instance\" \"web_instance\" {\n  ami             = \"ami-0c02fb55956c7d316\"\n  instance_type   = \"t2.micro\"\n  subnet_id       = aws_subnet.public_subnet.id\n  security_groups = [aws_security_group.web_sg.id]\n}\n\nresource \"aws_instance\" \"app_instance\" {\n  ami           = \"ami-0c02fb55956c7d316\"\n  instance_type = \"t2.micro\"\n  subnet_id     = aws_subnet.private_subnet_1.id\n}\n\nresource \"aws_db_subnet_group\" \"main\" {\n  name       = \"mydb-subnet-group\"\n  subnet_ids = [aws_subnet.private_subnet_1.id, aws_subnet.private_subnet_2.id]\n}\n\nresource \"aws_db_instance\" \"db_instance\" {\n  identifier           = \"mydb\"\n  engine               = \"mysql\"\n  instance_class       = \"db.t3.micro\"\n  allocated_storage    = 20\n  username             = \"admin\"\n  password             = \"your-password\"\n  skip_final_snapshot  = true\n  db_subnet_group_name = aws_db_subnet_group.main.name\n}\n\noutput \"vpc_id\" {\n  value = aws_vpc.my_vpc.id\n}\n\noutput \"web_instance_id\" {\n  value = aws_instance.web_instance.id\n}\n\noutput \"app_instance_id\" {\n  value = aws_instance.app_instance.id\n}\n\noutput \"db_endpoint\" {\n  value = aws_db_instance.db_instance.endpoint\n}\n"}, "hints": ["Public subnet needs map_public_ip_on_launch = true", "Private subnets should be in different availability zones for the DB subnet group", "EC2 instances need ami and instance_type", "RDS instance needs db_subnet_group_name", "Security group should be associated with the VPC"], "metadata": {"estimated_cost": "$0.10 (EC2 + RDS)", "deployment_time_seconds": 300, "cleanup_required": true, "created_at": "2025-02-25", "author": "iac-eval"}}
