{"instance_id": "terraform-aws-tfstate-001", "problem_statement": "Set up an S3 bucket and DynamoDB table for Terraform remote state management. The S3 bucket must have versioning enabled, server-side encryption using AES256, and all public access blocked. Create a DynamoDB table with PAY_PER_REQUEST billing mode and a hash key named 'LockID' of type String for state locking.", "difficulty": "medium", "tags": ["s3", "dynamodb", "terraform-state", "encryption", "aws"], "provider": "aws", "region": "us-east-1", "expected_resources": {"aws_s3_bucket": 1, "aws_s3_bucket_versioning": 1, "aws_s3_bucket_server_side_encryption_configuration": 1, "aws_s3_bucket_public_access_block": 1, "aws_dynamodb_table": 1}, "required_outputs": ["bucket_name", "dynamodb_table_name"], "validation_script": "dataset/s3_dynamodb_tf_state/validation.py", "gold_solution": {"main.tf": "resource \"aws_s3_bucket\" \"terraform_state\" {\n  bucket = \"my-terraform-state-bucket\"\n}\n\nresource \"aws_s3_bucket_versioning\" \"enabled\" {\n  bucket = aws_s3_bucket.terraform_state.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"default\" {\n  bucket = aws_s3_bucket.terraform_state.id\n\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_public_access_block\" \"public_access\" {\n  bucket                  = aws_s3_bucket.terraform_state.id\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\nresource \"aws_dynamodb_table\" \"terraform_locks\" {\n  name         = \"terraform-locks\"\n  billing_mode = \"PAY_PER_REQUEST\"\n  hash_key     = \"LockID\"\n\n  attribute {\n    name = \"LockID\"\n    type = \"S\"\n  }\n}\n\noutput \"bucket_name\" {\n  value = aws_s3_bucket.terraform_state.id\n}\n\noutput \"dynamodb_table_name\" {\n  value = aws_dynamodb_table.terraform_locks.name\n}\n"}, "hints": ["S3 bucket versioning is a separate resource: aws_s3_bucket_versioning", "Server-side encryption uses aws_s3_bucket_server_side_encryption_configuration", "Public access block needs all four boolean flags set to true", "DynamoDB table needs billing_mode PAY_PER_REQUEST and hash_key LockID", "The LockID attribute must be type S (String)"], "metadata": {"estimated_cost": "$0.00", "deployment_time_seconds": 120, "cleanup_required": true, "created_at": "2025-02-25", "author": "iac-eval"}}
