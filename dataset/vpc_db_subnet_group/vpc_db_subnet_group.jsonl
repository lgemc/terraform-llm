{"instance_id": "terraform-aws-vpc-db-001", "problem_statement": "Set up a VPC with CIDR 10.0.0.0/16 and two subnets in different availability zones, an internet gateway, and a route table for internet access. Define a security group allowing access to MySQL (port 3306) and PostgreSQL (port 5432) from any IP address. Create a database subnet group including both subnets.", "difficulty": "hard", "tags": ["vpc", "networking", "security-group", "rds", "aws"], "provider": "aws", "region": "us-east-1", "expected_resources": {"aws_vpc": 1, "aws_subnet": 2, "aws_internet_gateway": 1, "aws_route_table": 1, "aws_route_table_association": 2, "aws_security_group": 1, "aws_db_subnet_group": 1}, "required_outputs": ["vpc_id", "subnet_ids", "security_group_id", "db_subnet_group_name"], "validation_script": "dataset/vpc_db_subnet_group/validation.py", "gold_solution": {"main.tf": "resource \"aws_vpc\" \"main\" {\n  cidr_block           = \"10.0.0.0/16\"\n  enable_dns_hostnames = true\n}\n\nresource \"aws_subnet\" \"zonea\" {\n  vpc_id            = aws_vpc.main.id\n  cidr_block        = \"10.0.1.0/24\"\n  availability_zone = \"us-east-1a\"\n}\n\nresource \"aws_subnet\" \"zoneb\" {\n  vpc_id            = aws_vpc.main.id\n  cidr_block        = \"10.0.2.0/24\"\n  availability_zone = \"us-east-1b\"\n}\n\nresource \"aws_internet_gateway\" \"gateway\" {\n  vpc_id = aws_vpc.main.id\n}\n\nresource \"aws_route_table\" \"public\" {\n  vpc_id = aws_vpc.main.id\n\n  route {\n    cidr_block = \"0.0.0.0/0\"\n    gateway_id = aws_internet_gateway.gateway.id\n  }\n}\n\nresource \"aws_route_table_association\" \"publica\" {\n  subnet_id      = aws_subnet.zonea.id\n  route_table_id = aws_route_table.public.id\n}\n\nresource \"aws_route_table_association\" \"publicb\" {\n  subnet_id      = aws_subnet.zoneb.id\n  route_table_id = aws_route_table.public.id\n}\n\nresource \"aws_security_group\" \"allow_db_access\" {\n  name   = \"allow-db-access\"\n  vpc_id = aws_vpc.main.id\n\n  ingress {\n    from_port   = 3306\n    to_port     = 3306\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n\n  ingress {\n    from_port   = 5432\n    to_port     = 5432\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n}\n\nresource \"aws_db_subnet_group\" \"default\" {\n  subnet_ids = [aws_subnet.zonea.id, aws_subnet.zoneb.id]\n}\n\noutput \"vpc_id\" {\n  value = aws_vpc.main.id\n}\n\noutput \"subnet_ids\" {\n  value = [aws_subnet.zonea.id, aws_subnet.zoneb.id]\n}\n\noutput \"security_group_id\" {\n  value = aws_security_group.allow_db_access.id\n}\n\noutput \"db_subnet_group_name\" {\n  value = aws_db_subnet_group.default.name\n}\n"}, "hints": ["Create a VPC with cidr_block 10.0.0.0/16", "Create two subnets in different availability zones", "Attach an internet gateway to the VPC", "Create a route table with a default route to the internet gateway", "Associate both subnets with the route table", "Security group needs ingress rules for ports 3306 and 5432", "DB subnet group must reference both subnet IDs"], "metadata": {"estimated_cost": "$0.00", "deployment_time_seconds": 120, "cleanup_required": true, "created_at": "2025-02-25", "author": "iac-eval"}}
